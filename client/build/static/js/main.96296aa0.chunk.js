(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{23:function(e,a,t){e.exports=t(59)},32:function(e,a,t){},59:function(e,a,t){"use strict";t.r(a);var r=t(0),n=t.n(r),c=t(19),l=t.n(c),o=t(1),s=t(2);const m=()=>"undefined"!=typeof window&&(!!localStorage.getItem("jwt")&&JSON.parse(localStorage.getItem("jwt"))),i=(e,a)=>e.location.pathname===a?{color:"#ff9900"}:{color:"#ffffff"};var d=Object(s.g)(e=>{let{history:a}=e;return n.a.createElement("div",null,n.a.createElement("ul",{className:"nav nav-tabs bg-dark",style:{height:50}},n.a.createElement("li",{className:"nav-item"},n.a.createElement(o.b,{className:"nav-link",style:i(a,"/"),to:"/"},"HOME")),n.a.createElement("li",{className:"nav-item"},n.a.createElement(o.b,{className:"nav-link",style:i(a,"/shop"),to:"/shop"},"SHOP")),!m()&&n.a.createElement(r.Fragment,null,n.a.createElement("li",{className:"nav-item"},n.a.createElement(o.b,{className:"nav-link",style:i(a,"/signin"),to:"/signin"},"LOGIN")),n.a.createElement("li",{className:"nav-item"},n.a.createElement(o.b,{className:"nav-link",style:i(a,"/signup"),to:"/signup"},"SIGNUP")),n.a.createElement("li",{className:"nav-item ml-auto"},n.a.createElement(o.b,{className:"nav-link",style:i(a,"/about"),to:"/about"},"ABOUT"))),m()&&n.a.createElement(r.Fragment,null,m()&&0===m().user.role&&n.a.createElement("li",{className:"nav-item"},n.a.createElement(o.b,{className:"nav-link",style:i(a,"/user/dashboard"),to:"/user/dashboard"},"DASHBOARD")),m()&&1===m().user.role&&n.a.createElement("li",{className:"nav-item"},n.a.createElement(o.b,{className:"nav-link",style:i(a,"/admin/dashboard"),to:"/admin/dashboard"},"DASHBOARD")),n.a.createElement("li",{className:"nav-item"},n.a.createElement(o.b,{className:"nav-link",style:i(a,"/cart"),to:"/cart"},"CART ",n.a.createElement("sup",null,n.a.createElement("small",{className:"cart-badge"},void 0!==typeof window&&localStorage.getItem("cart")?JSON.parse(localStorage.getItem("cart")).length:0)))),n.a.createElement("li",{className:"nav-item"},n.a.createElement(o.b,{className:"nav-link",style:i(a,"/about"),to:"/about"},"ABOUT")),n.a.createElement("li",{className:"nav-item ml-auto"},n.a.createElement("span",{className:"nav-link",style:{cursor:"pointer",color:"#ffffff"},onClick:()=>(e=>{if("undefined"!==typeof window)return localStorage.removeItem("jwt"),e(),fetch("/api/signout",{method:"GET"}).then(e=>{console.log("signout",e)}).catch(e=>console.log(e))})(()=>{a.push("/")})},"LOGOUT")))))});t(32);var u=e=>{let{title:a="Title",description:t="Description",className:r,children:c}=e;return n.a.createElement("div",null,n.a.createElement(d,null),n.a.createElement("div",{className:"jumbotron"},n.a.createElement("h2",null,a),n.a.createElement("p",{className:"lead"},t)),n.a.createElement("div",{className:r},c))},p=t(21),E=t.n(p);const h=e=>fetch("/api/products?sortBy=".concat(e,"&order=desc&limit=6"),{method:"GET"}).then(e=>e.json()).catch(e=>{console.log(e)}),g=()=>fetch("/api/categories",{method:"GET"}).then(e=>e.json()).catch(e=>console.log(e)),N=async function(e,a){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r={limit:a,skip:e,filters:t};return fetch("/api/products/by/search",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(r)}).then(e=>e.json()).catch(e=>{console.log(e)})};var b=e=>{let{item:a,url:t}=e;return n.a.createElement("div",{className:"product-img"},n.a.createElement("img",{src:"/api/".concat(t,"/photo/").concat(a._id),alt:a.name,className:"mb-3",style:{maxHeight:"100%",maxWidth:"100%"}}))},v=t(8),f=t.n(v);var y=e=>{let{product:a,showViewProductButton:t=!0,showAddToCartButton:c=!0,cartUpdate:l=!1,showRemoveProductButton:m=!1,setRun:i=(e=>e),run:d}=e;const[u,p]=Object(r.useState)(!1),[E,h]=Object(r.useState)(a.count),g=()=>{((e,a)=>{let t=[];void 0!==typeof window&&(localStorage.getItem("cart")&&(t=JSON.parse(localStorage.getItem("cart"))),t.push({...e,count:1}),t=Array.from(new Set(t.map(e=>e._id))).map(e=>t.find(a=>a._id===e)),localStorage.setItem("cart",JSON.stringify(t)),a())})(a,()=>{p(!0)})},N=e=>a=>{i(!d),h(a.target.value<1?1:a.target.value),a.target.value>=1&&((e,a)=>{let t=[];void 0!==typeof window&&(localStorage.getItem("cart")&&(t=JSON.parse(localStorage.getItem("cart"))),t.forEach(t=>{t._id===e&&(t.count=a)}),localStorage.setItem("cart",JSON.stringify(t)))})(e,a.target.value)};return n.a.createElement("div",{className:"card"},n.a.createElement("div",{className:"card-header name text-center"},a.name),n.a.createElement("div",{className:"card-body"},(e=>{if(e)return n.a.createElement(s.a,{to:"/cart"})})(u),n.a.createElement(b,{item:a,url:"product"}),n.a.createElement("p",{className:"mt-2"},a.description),n.a.createElement("p",{className:"font-weight-bold"},"\u20b9 ",a.price),n.a.createElement("p",{className:"black-10"},"Category: ",a.category&&a.category.name),n.a.createElement("p",{className:"black-8"},"Added ",f()(a.createdAt).fromNow()),a.quantity>0?n.a.createElement("span",{className:"badge badge-primary badge-pill"},"In Stock"):n.a.createElement("span",{className:"badge badge-danger badge-pill"},"Out of Stock"),n.a.createElement("br",null),(e=>e&&n.a.createElement(o.b,{to:"/product/".concat(a._id),className:"mr-2"},n.a.createElement("button",{className:"btn btn-outline-primary mt-2 mb-2 mr-2"},"View Product")))(t),(e=>e&&n.a.createElement("button",{onClick:()=>{(e=>{let a=[];void 0!==typeof window&&(localStorage.getItem("cart")&&(a=JSON.parse(localStorage.getItem("cart"))),a.forEach((t,r)=>{t._id===e&&a.splice(r,1)}),localStorage.setItem("cart",JSON.stringify(a)))})(a._id),i(!d)},className:"btn btn-outline-danger mt-2 mb-2"},"Remove Product"))(m),(e=>e&&n.a.createElement("button",{onClick:g,className:"btn btn-outline-warning mt-2 mb-2"},"Add to Cart"))(c),(e=>e&&n.a.createElement("div",null,n.a.createElement("div",{className:"input-group mb-3"},n.a.createElement("div",{className:"input-group-prepend"},n.a.createElement("span",{className:"input-group-text"},"Adjust Quantity")),n.a.createElement("input",{type:"number",value:E,className:"form-control",onChange:N(a._id)}))))(l)))};var S=()=>{const[e,a]=Object(r.useState)({categories:[],category:"",search:"",results:[],searched:!1}),{categories:t,category:c,search:l,results:o,searched:s}=e;Object(r.useEffect)(()=>{g().then(e=>{e.error?console.log(e.error):a({...e,categories:e})})},[]);const m=()=>{l&&(e=>{const a=E.a.stringify(e);return fetch("/api/products/search?".concat(a),{method:"GET"}).then(e=>e.json()).catch(e=>{console.log(e)})})({search:l||void 0,category:c}).then(t=>{t.error?console.log(t.error):a({...e,results:t,searched:!0})})},i=e=>{e.preventDefault(),m()},d=t=>r=>{a({...e,[t]:r.target.value,searched:!1})},u=(e,a)=>e&&a.length>0?"Found ".concat(a.length," products"):e&&a.length<1?"No Products Found":void 0;return n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"container mb-3"},n.a.createElement("form",{onSubmit:i},n.a.createElement("span",{className:"input-group-text"},n.a.createElement("div",{className:"input-group input-group-lg"},n.a.createElement("div",{className:"input-group-prepend"},n.a.createElement("select",{className:"btn mr-2",onChange:d("category")},n.a.createElement("option",{value:"All"},"All Categories"),t.map((e,a)=>n.a.createElement("option",{key:a,value:e._id},e.name)))),n.a.createElement("input",{type:"search",className:"form-control",onChange:d("search"),placeholder:"Search by name"})),n.a.createElement("div",{className:"btn input-group-append",style:{border:"none"}},n.a.createElement("button",{className:"input-group-text"},"Search"))))),n.a.createElement("div",{className:"container-fluid mb-3"},function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return n.a.createElement("div",null,n.a.createElement("h2",{className:"mt-4 mb-4"},u(s,e)),n.a.createElement("div",{className:"row"},e.map((e,a)=>n.a.createElement(y,{key:a,product:e}))))}(o)))};var j=()=>{const[e,a]=Object(r.useState)([]),[t,c]=Object(r.useState)([]),[l,o]=Object(r.useState)(!1),[s,m]=Object(r.useState)(!0),i=()=>s&&n.a.createElement("div",{className:"alert alert-success"},n.a.createElement("h2",null,"Loading..."));return Object(r.useEffect)(()=>{h("sold").then(e=>{e.err?(o(e.err),console.log(l),m(!1)):(a(e),m(!1))}),h("createdAt").then(e=>{e.err?(o(e.err),m(!1)):(c(e),m(!1))}),i()},[]),n.a.createElement(u,{title:"BookSMart",description:"Buy some awesome dev related books now",className:"container-fluid"},n.a.createElement(S,null),n.a.createElement("h2",{className:"mb-4"},"New Arrivals"),i(),n.a.createElement("div",{className:"row"},t.map((e,a)=>n.a.createElement("div",{key:a,className:"col-4 mb-3"},n.a.createElement(y,{product:e})))),n.a.createElement("h2",{className:"mb-4"},"Best Sellers"),i(),n.a.createElement("div",{className:"row"},e.map((e,a)=>n.a.createElement("div",{key:a,className:"col-4 mb-3"},n.a.createElement(y,{product:e})))))};var w=()=>{const[e,a]=Object(r.useState)({name:"",email:"",password:"",error:"",success:!1}),{name:t,email:c,password:l,success:s,error:m}=e,i=t=>r=>{a({...e,error:!1,[t]:r.target.value})},d=r=>{r.preventDefault(),a({...e,error:!1}),(async e=>fetch("/api/signup",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(e)}).then(e=>e.json()).catch(e=>{console.log(e)}))({name:t,email:c,password:l}).then(t=>{t.error?a({...e,error:t.error,success:!1}):a({...e,name:"",email:"",password:"",error:"",success:!0})})};return n.a.createElement(u,{title:"Signup",description:"Sign up to the Node React E-commerce app",className:"container col-md-8 offset-md-2"},n.a.createElement("div",{className:"alert alert-danger",style:{display:m?"":"none"}},m),n.a.createElement("div",{className:"alert alert-info",style:{display:s?"":"none"}},"New account is created. Please ",n.a.createElement(o.b,{to:"/signin"},"Signin")),n.a.createElement("form",null,n.a.createElement("div",{className:"form-group"},n.a.createElement("label",{className:"text-muted"},"Name"),n.a.createElement("input",{onChange:i("name"),type:"text",className:"form-control",value:t})),n.a.createElement("div",{className:"form-group"},n.a.createElement("label",{className:"text-muted"},"Email"),n.a.createElement("input",{onChange:i("email"),type:"email",className:"form-control",value:c})),n.a.createElement("div",{className:"form-group"},n.a.createElement("label",{className:"text-muted"},"Password"),n.a.createElement("input",{onChange:i("password"),type:"password",className:"form-control",value:l})),n.a.createElement("div",{style:{textAlign:"center"}},n.a.createElement("button",{onClick:d,className:"btn btn-primary"},"Submit"))))};var O=()=>{const[e,a]=Object(r.useState)({email:"",password:"",error:"",loading:!1,redirectToReferrer:!1}),{email:t,password:c,loading:l,error:o,redirectToReferrer:i}=e,{user:d}=m(),p=t=>r=>{a({...e,error:!1,[t]:r.target.value})},E=r=>{r.preventDefault(),a({...e,error:!1,loading:!0}),(async e=>fetch("/api/signin",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(e)}).then(e=>e.json()).catch(e=>{console.log(e)}))({email:t,password:c}).then(t=>{t.err?a({...e,error:t.err,loading:!1}):((e,a)=>{"undefined"!==typeof window&&(localStorage.setItem("jwt",JSON.stringify(e)),a())})(t,()=>{a({...e,redirectToReferrer:!0,loading:!1})})})};return n.a.createElement(u,{title:"Signin",description:"Login to your account to view and purchase awesome content",className:"container col-md-8 offset-md-2"},n.a.createElement("div",{className:"alert alert-danger",style:{display:o?"":"none"}},o),l&&n.a.createElement("div",{className:"alert alert-info"},n.a.createElement("h2",null,"Loading...")),i?1===d.role?n.a.createElement(s.a,{to:"/admin/dashboard"}):n.a.createElement(s.a,{to:"/user/dashboard"}):m()?n.a.createElement(s.a,{to:"/"}):void 0,n.a.createElement("form",null,n.a.createElement("div",{className:"form-group"},n.a.createElement("label",{className:"text-muted"},"Email"),n.a.createElement("input",{onChange:p("email"),type:"email",className:"form-control",value:t})),n.a.createElement("div",{className:"form-group"},n.a.createElement("label",{className:"text-muted"},"Password"),n.a.createElement("input",{onChange:p("password"),type:"password",className:"form-control",value:c})),n.a.createElement("div",{style:{textAlign:"center"}},n.a.createElement("button",{onClick:E,className:"btn btn-primary"},"Submit"))))};var k=e=>{let{component:a,...t}=e;return n.a.createElement(s.b,Object.assign({},t,{render:e=>m()?n.a.createElement(a,e):n.a.createElement(s.a,{to:"/signin"})}))};var x=e=>{let{component:a,...t}=e;return n.a.createElement(s.b,Object.assign({},t,{render:e=>m()&&1===m().user.role?n.a.createElement(a,e):n.a.createElement(s.a,{to:"/signin"})}))};var C=e=>{let{categories:a,handleFilters:t}=e;const[c,l]=Object(r.useState)([]),o=e=>()=>{const a=c.indexOf(e),r=[...c];-1===a?r.push(e):r.splice(a,1),l(r),t(r)};return a.map((e,a)=>n.a.createElement("li",{key:a,className:"list-unstyled"},n.a.createElement("input",{onChange:o(e._id),value:c.indexOf(-1===e._id),type:"checkbox",className:"form-check-input"}),n.a.createElement("label",{className:"form-check-label"},e.name)))};var P=e=>{let{prices:a,handleFilters:t}=e;const[c,l]=Object(r.useState)(0),o=e=>{t(e.target.value),l(e.target.value),console.log(c)};return a.map((e,a)=>n.a.createElement("div",{key:a},n.a.createElement("input",{onChange:o,value:"".concat(e._id),type:"radio",name:e,className:"mr-2 ml-4"}),n.a.createElement("label",{className:"form-check-label"},e.name)))};const T=[{_id:0,name:"Any",array:[]},{_id:1,name:"\u20b90 to 200",array:[0,200]},{_id:2,name:"\u20b9200 to 500",array:[200,500]},{_id:3,name:"\u20b9500 to 750",array:[500,1e3]},{_id:4,name:"\u20b9750+",array:[750,99999]}];var A=()=>{const[e,a]=Object(r.useState)({filters:{category:[],price:[]}}),[t,c]=Object(r.useState)([]),[l,o]=Object(r.useState)(!1),[s]=Object(r.useState)(6),[m,i]=Object(r.useState)(0),[d,p]=Object(r.useState)(0),[E,h]=Object(r.useState)([]),[b,v]=Object(r.useState)(!0),f=e=>{N(m,s,e).then(e=>{e.error?(o(e.error),v(!1)):(h(e.data),v(!1),p(e.size),i(0))})},S=()=>{let a=m+s;N(a,s,e.filters).then(e=>{e.error?(o(e.error),v(!1)):(h([...E,...e.data]),p(e.size),v(!1),i(a))})},j=()=>b&&n.a.createElement("div",{className:"alert alert-success"},n.a.createElement("h2",null,"Loading..."));Object(r.useEffect)(()=>{g().then(e=>{e.error?(o(e.error),console.log(l),v(!1)):(c(e),v(!1))}),f(m,e.filters),j()},[]);const w=(t,r)=>{const n={...e};if(n.filters[r]=t,"price"===r){let e=O(t);n.filters[r]=e}f(e.filters),a(n)},O=e=>{const a=T;let t=[];for(let r in a)a[r]._id===parseInt(e)&&(t=a[r].array);return t};return n.a.createElement(u,{title:"Shop Page",description:"Search and find books of your choice",className:"container-fluid"},n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"col-4"},n.a.createElement("h4",null,"Filter by categories"),n.a.createElement("ul",null,n.a.createElement(C,{categories:t,handleFilters:e=>w(e,"category")})),n.a.createElement("h4",null,"Filter by price range"),n.a.createElement("div",null,n.a.createElement(P,{prices:T,handleFilters:e=>w(e,"price")}))),n.a.createElement("div",{className:"col-8"},n.a.createElement("h2",{className:"mb-4"},"Products"),j(),n.a.createElement("div",{className:"row"},E.map((e,a)=>n.a.createElement("div",{key:a,className:"col-4 mb-3"},n.a.createElement(y,{product:e})))),n.a.createElement("hr",null),d>0&&d>=s&&n.a.createElement("div",{className:"text-center"},n.a.createElement("button",{onClick:S,className:"btn btn-warning mb-5"},"Load more")))))},_=t(22),I=t.n(_);var D=e=>{let{products:a}=e;const[t,c]=Object(r.useState)({loading:!1,success:!1,clientToken:null,error:"",instance:{},address:""}),l=m()&&m().user._id,s=m()&&m().token,i=(e,a)=>{((e,a)=>fetch("/api/braintree/getToken/".concat(e),{method:"GET",headers:{Accept:"application/json",Authorization:"Bearer ".concat(a),"Content-Type":"application/json"}}).then(e=>e.json()).catch(e=>console.log(e)))(e,a).then(e=>{e.error?c({...e,error:e.error}):c({clientToken:e.clientToken})})};Object(r.useEffect)(()=>{i(l,s)},[]);const d=e=>{c({...t,address:e.target.value})},u=()=>a.reduce((e,a)=>e+a.count*a.price,0);let p=t.address;const E=()=>{let e;c({loading:!0}),t.instance.requestPaymentMethod().then(t=>{e=t.nonce;const r={paymentMethodNonce:e,amount:u()};((e,a,t)=>fetch("/api/braintree/payment/".concat(e),{method:"POST",headers:{Accept:"application/json",Authorization:"Bearer ".concat(a),"Content-Type":"application/json"},body:JSON.stringify(t)}).then(e=>e.json(e)).catch(e=>console.log(e)))(l,s,r).then(e=>{console.log(e);const t={products:a,transaction_id:e.transaction.id,amount:e.transaction.amount,address:p};((e,a,t)=>fetch("/api/order/create/".concat(e),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(a)},body:JSON.stringify({order:t})}).then(e=>e.json()).catch(e=>console.log(e)))(l,s,t).then(e=>{var a;a=()=>{console.log("payment success and empty cart"),c({loading:!1,success:!0})},"undefined"!==typeof window&&(localStorage.removeItem("cart"),a()),setTimeout(()=>window.location.reload(),2200)}).catch(e=>{console.log(e),c({loading:!1})})}).catch(e=>{console.log(e),c({loading:!1})})}).catch(e=>{c({...t,error:e.message})})},h=()=>n.a.createElement("div",{onBlur:()=>c({...t,error:""})},null!==t.clientToken&&a.length>0?n.a.createElement("div",null,n.a.createElement("div",{className:"gorm-group mb-3",style:{display:t.success?"none":""}},n.a.createElement("label",{className:"text-muted"},"Delivery address:"),n.a.createElement("textarea",{onChange:d,className:"form-control",value:t.address,placeholder:"Please enter your shipping address here.."})),n.a.createElement(I.a,{options:{authorization:t.clientToken,paypal:{flow:"vault"}},onInstance:e=>t.instance=e}),n.a.createElement("button",{onClick:E,className:"btn btn-success btn-block",style:{display:t.success?"none":""}},"Pay")):null);return n.a.createElement("div",null,n.a.createElement("h2",null,"Total: \u20b9 ",u()),n.a.createElement("p",null,"Try checking out with a dummy credit card number like 4111 1111 1111 1111 and any expiration date and cvv"),t.loading&&n.a.createElement("h2",{className:"text-danger"},"Loading..."),(N=t.success,n.a.createElement("div",{className:"alert alert-info",style:{display:N?"":"none"}},"Thanks! Your payment was successful! Please check your email")),(g=t.error,n.a.createElement("div",{className:"alert alert-danger",style:{display:g?"":"none"}},g)),m()?n.a.createElement("div",null,h()):n.a.createElement(o.b,{to:"/signin"},n.a.createElement("button",{className:"btn btn-primary"},"Sign in to checkout")));var g,N};var B=()=>{const[e,a]=Object(r.useState)([]),[t,c]=Object(r.useState)(!1);return Object(r.useEffect)(()=>{a(void 0!==typeof window&&localStorage.getItem("cart")?JSON.parse(localStorage.getItem("cart")):[])},[t]),n.a.createElement(u,{title:"My Cart",description:"Manage your cart items. Add, Remove, Checkout or continue shopping",className:"container-fluid"},n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"col-6"},e.length>0?(e=>n.a.createElement("div",null,n.a.createElement("h2",null,"Your cart has ","".concat(e.length)," items"),n.a.createElement("hr",null),e.map((e,a)=>n.a.createElement(y,{key:a,product:e,showAddToCartButton:!1,cartUpdate:!0,showRemoveProductButton:!0,setRun:c,run:t}))))(e):n.a.createElement("div",null,n.a.createElement("h2",null,"Your cart is empty"),n.a.createElement("br",null),n.a.createElement(o.b,{to:"/shop"},"Start Shopping now!"))),n.a.createElement("div",{className:"col-6"},n.a.createElement("h2",{className:"mb-4"},"Cart summary"),n.a.createElement("hr",null),n.a.createElement(D,{products:e}))))};var J=e=>{const[a,t]=Object(r.useState)({}),[c,l]=Object(r.useState)([]),[o,s]=Object(r.useState)(!1),[m,i]=Object(r.useState)(!0),d=e=>{(e=>fetch("/api/product/".concat(e),{method:"GET"}).then(e=>e.json()).catch(e=>{console.log(e)}))(e).then(e=>{e.err?(s(e.err),console.log(o),i(!1)):(t(e),(e=>fetch("/api/products/related/".concat(e),{method:"GET"}).then(e=>e.json()).catch(e=>console.log(e)))(e._id).then(e=>{e.err?s(e.err):l(e)}),i(!1))})},p=()=>m&&n.a.createElement("div",{className:"alert alert-success"},n.a.createElement("h2",{className:"text-center"},"Loading..."));return Object(r.useEffect)(()=>{const a=e.match.params.productId;d(a),p()},[e]),n.a.createElement(r.Fragment,null,m?p():n.a.createElement(u,{title:a&&a.name,description:a&&a.description&&a.description.substring(0,100),className:"container-fluid"},n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"col-8"},a&&a.description&&n.a.createElement(y,{product:a,showViewProductButton:!1})),n.a.createElement("div",{className:"col-4"},n.a.createElement("h4",null,"Related Products"),c.map((e,a)=>n.a.createElement("div",{className:"mb-3"},n.a.createElement(y,{key:a,product:e})))))))};var U=()=>{const{user:{_id:e,name:a,email:t,role:c},token:l}=m(),[s,i]=Object(r.useState)([]),d=(e,a)=>{((e,a)=>fetch("/api/orders/by/user/".concat(e),{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(a)}}).then(e=>e.json()).catch(e=>console.log(e)))(e,a).then(e=>{e.error?console.log(e.error):i(e)})};Object(r.useEffect)(()=>{d(e,l)},[]);return n.a.createElement(u,{title:"Dashboard",description:"Welcome, ".concat(a),className:"container-fluid"},n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"xs-col-12 col-sm-4"},n.a.createElement("div",{className:"card mb-5"},n.a.createElement("h4",{className:"card-header text-center"},"User Links"),n.a.createElement("ul",{className:"list-group"},n.a.createElement("li",{className:"list-group-item"},n.a.createElement(o.b,{to:"/cart",className:"nav-link"},"My Shopping Cart")),n.a.createElement("li",{className:"list-group-item"},n.a.createElement(o.b,{to:"/profile/".concat(e),className:"nav-link"},"Update Profile"))))),n.a.createElement("div",{className:"xs-col-12 col-sm-8"},n.a.createElement("div",{className:"card mb-5"},n.a.createElement("h3",{className:"card-header text-center"},"User Information"),n.a.createElement("ul",{className:"list-group"},n.a.createElement("li",{className:"list-group-item"},a),n.a.createElement("li",{className:"list-group-item"},t),n.a.createElement("li",{className:"list-group-item"},1===c?"Admin":"User id : ".concat(e)))),(e=>n.a.createElement("div",{className:"card mb-5"},n.a.createElement("h3",{className:"card-header"},"Purchase history"),n.a.createElement("ul",{className:"list-group"},n.a.createElement("li",{className:"list-group-item"},e.map((e,a)=>n.a.createElement("div",null,n.a.createElement("hr",null),e.products.map((e,a)=>n.a.createElement("div",{key:a},n.a.createElement("h6",null,"Product name: ",e.name),n.a.createElement("h6",null,"Product price: $",e.price),n.a.createElement("h6",null,"Purchased date:"," ",f()(e.createdAt).fromNow())))))))))(s))))};var G=()=>{const{user:{_id:e,name:a,email:t,role:r}}=m();return n.a.createElement(u,{title:"Admin Dashboard",description:"Welcome, ".concat(a),className:"container-fluid"},n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"xs-col-12 col-sm-4"},n.a.createElement("div",{className:"card mb-5"},n.a.createElement("h4",{className:"card-header text-center"},"Admin Links"),n.a.createElement("ul",{className:"list-group"},n.a.createElement("li",{className:"list-group-item"},n.a.createElement(o.b,{to:"/create/category",className:"nav-link"},"Create Category")),n.a.createElement("li",{className:"list-group-item"},n.a.createElement(o.b,{to:"/create/product",className:"nav-link"},"Create Product")),n.a.createElement("li",{className:"list-group-item"},n.a.createElement(o.b,{to:"/admin/orders",className:"nav-link"},"Manage Orders")),n.a.createElement("li",{className:"list-group-item"},n.a.createElement(o.b,{to:"/admin/products",className:"nav-link"},"Manage Products"))))),n.a.createElement("div",{className:"xs-col-12 col-sm-8"},n.a.createElement("div",{className:"card mb-5"},n.a.createElement("h3",{className:"card-header text-center"},"Admin Information"),n.a.createElement("ul",{className:"list-group"},n.a.createElement("li",{className:"list-group-item"},a),n.a.createElement("li",{className:"list-group-item"},t),n.a.createElement("li",{className:"list-group-item"},1===r?"Admin":"User id : ".concat(e)))))))};var L=e=>{let{match:a}=e;const[t,c]=Object(r.useState)({name:"",email:"",password:"",error:!1,loading:!0,success:!1}),{name:l,email:o,password:i,error:d,success:p,loading:E}=t,{token:h}=m(),g=e=>{((e,a)=>fetch("/api/user/".concat(e),{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(a)}}).then(e=>e.json()).catch(e=>{console.log(e)}))(e,h).then(e=>{e.error?c({...t,error:!0,loading:!1}):c({...t,name:e.name,email:e.email,loading:!1})})},N=e=>a=>{c({...t,error:!1,[e]:a.target.value})},b=e=>{e.preventDefault(),((e,a,t)=>fetch("/api/user/".concat(e),{method:"PUT",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(a)},body:JSON.stringify(t)}).then(e=>e.json()).catch(e=>console.log(e)))(a.params.userId,h,{name:l,email:o,password:i}).then(e=>{e.error?console.log(e.error):((e,a)=>{if("undefined"!==typeof window&&localStorage.getItem("jwt")){let t=JSON.parse(localStorage.getItem("jwt"));t.user=e,localStorage.setItem("jwt",JSON.stringify(t)),a()}})(e,()=>{c({...t,name:e.name,email:e.email,success:!0})})})},v=()=>E&&n.a.createElement("div",{className:"alert alert-success"},n.a.createElement("h2",null,"Loading..."));return Object(r.useEffect)(()=>{g(a.params.userId),v()},[]),n.a.createElement(u,{title:"My Profile",description:"Update your profile",className:"container-fluid"},n.a.createElement("h2",null,"Profile Update"),v(),((e,a,t)=>n.a.createElement("form",null,n.a.createElement("div",{className:"form-group"},n.a.createElement("label",{className:"text-muted"},"Name"),n.a.createElement("input",{type:"text",value:e,onChange:N("name"),className:"form-control"})),n.a.createElement("div",{className:"form-group"},n.a.createElement("label",{className:"text-muted"},"Email"),n.a.createElement("input",{type:"email",value:a,onChange:N("email"),className:"form-control"})),n.a.createElement("div",{className:"form-group"},n.a.createElement("label",{className:"text-muted"},"Password"),n.a.createElement("input",{type:"password",value:t,onChange:N("password"),className:"form-control"})),n.a.createElement("button",{onClick:b,className:"btn btn-primary"},"Submit")))(l,o,i),(e=>{if(e)return n.a.createElement(s.a,{to:"/dashboard"})})(p))};const R=()=>fetch("/api/categories",{method:"GET"}).then(e=>e.json()).catch(e=>console.log(e));var z=()=>{const[e,a]=Object(r.useState)(""),[t,c]=Object(r.useState)(!1),[l,o]=Object(r.useState)(!1),{user:s,token:i}=m(),d=e=>{c(!1),a(e.target.value)},p=a=>{a.preventDefault(),c(!1),o(!1),(async(e,a,t)=>fetch("/api/category/create/".concat(e),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(a)},body:JSON.stringify(t)}).then(e=>e.json()).catch(e=>{console.log(e)}))(s._id,i,{name:e}).then(e=>{e.error?c(!0):(c(!1),o(!0))})};return n.a.createElement(u,{title:"Add a new Category",description:"Ready to add a new category?"},n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"xs-col-12 col-sm-8"},(()=>{if(l)return n.a.createElement("h3",{className:"text-success"},e," is created")})(),(()=>{if(t)return n.a.createElement("h3",{className:"text-danger"},e," is not unique")})(),n.a.createElement("form",null,n.a.createElement("div",{className:"form-group text-center"},n.a.createElement("label",{className:"text-muted"},"Name"),n.a.createElement("input",{onChange:d,type:"name",className:"form-control",value:e,required:!0})),n.a.createElement("div",{style:{textAlign:"center"}},n.a.createElement("button",{onClick:p,className:"btn btn-primary"},"Submit"))))))};var q=()=>{const{user:e,token:a}=m(),[t,c]=Object(r.useState)({name:"",description:"",price:"",categories:[],category:"",shipping:"",quantity:0,photo:"",loading:!1,error:"",createdProduct:"",formData:""}),{name:l,description:o,price:s,categories:i,category:d,shipping:p,quantity:E,loading:h,error:g,createdProduct:N,formData:b}=t;Object(r.useEffect)(()=>{R().then(e=>{e.err?c({...t,error:e.err}):c({...t,categories:e,formData:new FormData})})},[]);const v=e=>a=>{const r="photo"===e?a.target.files[0]:a.target.value;b.set(e,r),c({...t,[e]:r})},f=r=>{r.preventDefault(),c({...t,error:"",loading:!0}),(async(e,a,t)=>fetch("/api/product/create/".concat(e),{method:"POST",headers:{Accept:"application/json",Authorization:"Bearer ".concat(a)},body:t}).then(e=>e.json()).catch(e=>{console.log(e)}))(e._id,a,b).then(e=>{e.err?c({...t,error:e.err}):c({...t,name:"",description:"",photo:"",price:"",quantity:0,loading:"",category:"",shipping:"",createdProduct:e.name})})};return n.a.createElement(u,{title:"Add a new Product",description:"Ready to add a new Product?"},n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"col-md-8 offset-md-2"},n.a.createElement("div",{className:"alert alert-danger",style:{display:g?"":"none"}},g),n.a.createElement("div",{className:"alert alert-info",style:{display:N?"":"none"}},n.a.createElement("h2",null,"".concat(N)," is created")),h&&n.a.createElement("div",{className:"alert alert-success"},n.a.createElement("h2",null,"Loading...")),n.a.createElement("form",{className:"mb-3",onSubmit:f},n.a.createElement("h4",null,"Post photo"),n.a.createElement("div",{className:"form-group"},n.a.createElement("label",{className:"btn btn-secondary"},n.a.createElement("input",{onChange:v("photo"),type:"file",name:"photo",accept:"image/*"}))),n.a.createElement("div",{className:"form-group"},n.a.createElement("label",null,"Name"),n.a.createElement("input",{onChange:v("name"),type:"text",className:"form-control",value:l})),n.a.createElement("div",{className:"form-group"},n.a.createElement("label",null,"Description"),n.a.createElement("textarea",{onChange:v("description"),className:"form-control",value:o})),n.a.createElement("div",{className:"form-group"},n.a.createElement("label",null,"Price"),n.a.createElement("input",{onChange:v("price"),type:"number",className:"form-control",value:s})),n.a.createElement("div",{className:"form-group"},n.a.createElement("label",null,"Category"),n.a.createElement("select",{onChange:v("category"),className:"form-control",value:d},n.a.createElement("option",null,"Select"),i&&i.map((e,a)=>n.a.createElement("option",{key:a,value:e._id},e.name)))),n.a.createElement("div",{className:"form-group"},n.a.createElement("label",null,"Shipping"),n.a.createElement("select",{onChange:v("shipping"),className:"form-control",value:p},n.a.createElement("option",null,"Please Select"),n.a.createElement("option",{value:"0"},"No"),n.a.createElement("option",{value:"1"},"Yes"))),n.a.createElement("div",{className:"form-group"},n.a.createElement("label",null,"Quantity"),n.a.createElement("input",{onChange:v("quantity"),type:"number",className:"form-control",value:E})),n.a.createElement("button",{className:"btn btn-outline-primary"},"Create Product")))))};var F=e=>{let{match:a}=e;const[t,c]=Object(r.useState)({name:"",description:"",price:"",categories:[],category:"",shipping:"",quantity:"",photo:"",loading:!1,error:!1,createdProduct:"",redirectToProfile:!1,formData:""}),{user:l,token:o}=m(),{name:i,description:d,price:p,categories:E,category:h,shipping:g,quantity:N,loading:b,error:v,createdProduct:f,redirectToProfile:y,formData:S}=t,j=e=>{(e=>fetch("/api/product/".concat(e),{method:"GET"}).then(e=>e.json()).catch(e=>console.log(e)))(e).then(e=>{e.error?c({...t,error:e.error}):(c({...t,name:e.name,description:e.description,price:e.price,category:e.category._id,shipping:e.shipping,quantity:e.quantity,formData:new FormData}),w())})},w=()=>{R().then(e=>{e.error?c({...t,error:e.error}):c({categories:e,formData:new FormData})})};Object(r.useEffect)(()=>{j(a.params.productId)},[]);const O=e=>a=>{const r="photo"===e?a.target.files[0]:a.target.value;S.set(e,r),c({...t,[e]:r})},k=e=>{e.preventDefault(),c({...t,error:"",loading:!0}),((e,a,t,r)=>fetch("/api/product/".concat(e,"/").concat(a),{method:"PUT",headers:{Accept:"application/json",Authorization:"Bearer ".concat(t)},body:r}).then(e=>e.json()).catch(e=>console.log(e)))(a.params.productId,l._id,o,S).then(e=>{e.error?c({...t,error:e.error}):c({...t,name:"",description:"",photo:"",price:"",quantity:"",loading:!1,error:!1,redirectToProfile:!0,createdProduct:e.name})})};return n.a.createElement(u,{title:"Add a new product",description:"G'day ".concat(l.name,", ready to add a new product?")},n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"col-md-8 offset-md-2"},b&&n.a.createElement("div",{className:"alert alert-success"},n.a.createElement("h2",null,"Loading...")),n.a.createElement("div",{className:"alert alert-info",style:{display:f?"":"none"}},n.a.createElement("h2",null,"".concat(f)," is updated!")),n.a.createElement("div",{className:"alert alert-danger",style:{display:v?"":"none"}},v),n.a.createElement("form",{className:"mb-3",onSubmit:k},n.a.createElement("h4",null,"Post Photo"),n.a.createElement("div",{className:"form-group"},n.a.createElement("label",{className:"btn btn-secondary"},n.a.createElement("input",{onChange:O("photo"),type:"file",name:"photo",accept:"image/*"}))),n.a.createElement("div",{className:"form-group"},n.a.createElement("label",{className:"text-muted"},"Name"),n.a.createElement("input",{onChange:O("name"),type:"text",className:"form-control",value:i})),n.a.createElement("div",{className:"form-group"},n.a.createElement("label",{className:"text-muted"},"Description"),n.a.createElement("textarea",{onChange:O("description"),className:"form-control",value:d})),n.a.createElement("div",{className:"form-group"},n.a.createElement("label",{className:"text-muted"},"Price"),n.a.createElement("input",{onChange:O("price"),type:"number",className:"form-control",value:p})),n.a.createElement("div",{className:"form-group"},n.a.createElement("label",{className:"text-muted"},"Category"),n.a.createElement("select",{onChange:O("category"),className:"form-control"},n.a.createElement("option",null,"Please select"),E&&E.map((e,a)=>n.a.createElement("option",{key:a,value:e._id},e.name)))),n.a.createElement("div",{className:"form-group"},n.a.createElement("label",{className:"text-muted"},"Shipping"),n.a.createElement("select",{onChange:O("shipping"),className:"form-control"},n.a.createElement("option",null,"Please select"),n.a.createElement("option",{value:"0"},"No"),n.a.createElement("option",{value:"1"},"Yes"))),n.a.createElement("div",{className:"form-group"},n.a.createElement("label",{className:"text-muted"},"Quantity"),n.a.createElement("input",{onChange:O("quantity"),type:"number",className:"form-control",value:N})),n.a.createElement("button",{className:"btn btn-outline-primary"},"Update Product")),(()=>{if(y&&!v)return n.a.createElement(s.a,{to:"/"})})())))};var M=()=>{const[e,a]=Object(r.useState)([]),[t,c]=Object(r.useState)([]),[l,o]=Object(r.useState)(!0),{user:s,token:i}=m(),d=()=>{((e,a)=>fetch("/api/order/list/".concat(e),{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(a)}}).then(e=>(console.log(e.json()),e.json())).catch(e=>console.log(e)))(s._id,i).then(e=>{e.error?(console.log(e.err),o(!1)):(a(e),o(!1))})},p=()=>{((e,a)=>fetch("/api/order/status-values/".concat(e),{method:"GET",headers:{Accept:"application/json",Authorization:"Bearer ".concat(a)}}).then(e=>e.json()).catch(e=>console.log(e)))(s._id,i).then(e=>{e.error?(console.log(e.error),o(!1)):(c(e),o(!1))})},E=(e,a)=>{((e,a,t,r)=>fetch("/api/order/".concat(t,"/status/").concat(e),{method:"PUT",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(a)},body:JSON.stringify({status:r,orderId:t})}).then(e=>e.json()).catch(e=>console.log(e)))(s._id,i,a,e.target.value).then(e=>{e.error?console.log("Status update fail"):d()})},h=(e,a)=>n.a.createElement("div",{className:"input-group mb-2 mr-sm-2"},n.a.createElement("div",{className:"input-group-prepend"},n.a.createElement("div",{className:"input-group-text"},e)),n.a.createElement("input",{type:"text",className:"form-control",value:a,readOnly:!0})),g=()=>l&&n.a.createElement("div",{className:"alert alert-success"},n.a.createElement("h2",null,"Loading..."));return Object(r.useEffect)(()=>{d(),p(),g()},[]),n.a.createElement(u,{title:"Orders",description:"Manage all the orders here",className:"container"},g(),n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"xs-col-12 col-sm-8"},n.a.createElement("h2",{className:"text-danger display-2"},"Total Orders: ",e.length),e.map((e,a)=>n.a.createElement("div",{key:a,className:"mt-5",style:{borderBottom:"5px solid indigo"}},n.a.createElement("h2",{className:"mb-5"},n.a.createElement("span",{className:"bg-primary"},"Order Id : ",e._id)),n.a.createElement("ul",{className:"list-group mb-2"},n.a.createElement("li",{className:"list-group-item"},(e=>n.a.createElement("div",{className:"form-group"},n.a.createElement("h3",{className:"mark mb-4"},"Status: ",e.status),n.a.createElement("select",{className:"form-control",onChange:a=>E(a,e._id)},n.a.createElement("option",null,"Update Status"),t.map((e,a)=>n.a.createElement("option",{key:a,value:e},e)))))(e)),n.a.createElement("li",{className:"list-group-item"},"Transaction_id: ",e.transaction_id),n.a.createElement("li",{className:"list-group-item"},"Amount: ",e.amount),n.a.createElement("li",{className:"list-group-item"},"Ordered by: ",e.user.name),n.a.createElement("li",{className:"list-group-item"},"Order Date: ",f()(e.createdAt).fromNow()),n.a.createElement("li",{className:"list-group-item"},"Delivery address: ",e.address)),n.a.createElement("h5",{className:"mt-4 mb-4 font-italic"},"Total products in the order: ",e.products.length),e.products.map((e,a)=>n.a.createElement("div",{className:"mb-4",key:a,style:{padding:"20px",border:"1px solid indigo"}},h("Product name",e.name),h("Product price",e.price),h("Product total",e.count),h("Product id",e._id))))))))};var H=e=>{const[a,t]=Object(r.useState)([]),{user:c,token:l}=m(),s=()=>{fetch("/api/products?limit=100",{method:"GET"}).then(e=>e.json()).catch(e=>console.log(e)).then(e=>{e.error?console.log(e.error):t(e)})},i=e=>{((e,a,t)=>fetch("/api/product/".concat(e,"/").concat(a),{method:"DELETE",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(t)}}).then(e=>e.json()).catch(e=>console.log(e)))(e,c._id,l).then(e=>{e.error?console.log(e.error):s()})};return Object(r.useEffect)(()=>{s()},[]),n.a.createElement(u,{title:"Manage Products",description:"Perform CRUD on products"},n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"col-12"},n.a.createElement("h2",{className:"text-center"},"Total ",a.length," Products"),n.a.createElement("hr",null),n.a.createElement("ul",{className:"list-group"},a.map((e,a)=>n.a.createElement("li",{key:a,className:"list-group-item d-flex justify-content-between align-items-center"},n.a.createElement("strong",null,e.name),n.a.createElement(o.b,{to:"/admin/products/update/".concat(e._id)},n.a.createElement("span",{className:"badge badge-warning badge-pill"},"Update")),n.a.createElement("span",{onClick:()=>i(e._id),className:"badge badge-danger badge-pill"},"Delete")))))))};var Y=()=>n.a.createElement(u,{title:"About",description:"Made with \u2764 by Charan"},n.a.createElement("div",{className:"container"},n.a.createElement("a",{href:"#",target:"_blank",rel:"noopener noreferrer"},n.a.createElement("h2",null,"Github")),n.a.createElement("a",{href:"#",target:"_blank",rel:"noopener noreferrer"},n.a.createElement("h2",null,"LinkedIn")),n.a.createElement("a",{href:"#",target:"_blank",rel:"noopener noreferrer"},n.a.createElement("h2",null,"Website")),n.a.createElement("a",{href:"mailto:sujith2004kumar@gmail.com"},n.a.createElement("h2",null,"Email"))));var W=()=>n.a.createElement(o.a,null,n.a.createElement(s.d,null,n.a.createElement(s.b,{exact:!0,path:"/",component:j}),n.a.createElement(s.b,{exact:!0,path:"/shop",component:A}),n.a.createElement(s.b,{exact:!0,path:"/product/:productId",component:J}),n.a.createElement(s.b,{exact:!0,path:"/signin",component:O}),n.a.createElement(s.b,{exact:!0,path:"/signup",component:w}),n.a.createElement(s.b,{exact:!0,path:"/cart",component:B}),n.a.createElement(s.b,{exact:!0,path:"/about",component:Y}),n.a.createElement(k,{exact:!0,path:"/user/dashboard",component:U}),n.a.createElement(k,{exact:!0,path:"/profile/:userId",component:L}),n.a.createElement(x,{exact:!0,path:"/admin/dashboard",component:G}),n.a.createElement(x,{exact:!0,path:"/create/category",component:z}),n.a.createElement(x,{exact:!0,path:"/create/product",component:q}),n.a.createElement(x,{exact:!0,path:"/admin/products/update/:productId",component:F}),n.a.createElement(x,{exact:!0,path:"/admin/orders",component:M}),n.a.createElement(x,{exact:!0,path:"/admin/products",component:H})));l.a.render(n.a.createElement(W,null),document.getElementById("root"))}},[[23,1,2]]]);
//# sourceMappingURL=main.96296aa0.chunk.js.map